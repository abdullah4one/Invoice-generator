<!DOCTYPE html>
<html>
    <head>
        <title>Invoice Generator</title>
        <link rel="stylesheet" type="text/css" href="../style.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">	
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
        <script src="https://www.gstatic.com/firebasejs/5.9.1/firebase-app.js"></script>

        <script src="https://www.gstatic.com/firebasejs/5.9.1/firebase-auth.js"></script>
        <script src="https://www.gstatic.com/firebasejs/5.9.1/firebase-firestore.js"></script>

        <script>
            // Initialize Firebase
            var config = {
                apiKey: "AIzaSyCyBdwJeaD2Vm17T8BRXrumNoOk3Z8NucE",
                authDomain: "invoice-generator-2ad43.firebaseapp.com",
                databaseURL: "https://invoice-generator-2ad43.firebaseio.com",
                projectId: "invoice-generator-2ad43",
                storageBucket: "invoice-generator-2ad43.appspot.com",
                messagingSenderId: "862076289309"
            };
            firebase.initializeApp(config);
        </script>
    </head>
    
    <body>
        <nav>
            <div class="nav-wrapper grey darken-4">
                <a href="#" class="brand-logo center" style="padding-left: 20px;">Invoice Generator</a>
            </div>
        </nav>

        <!-- side nav content -->
        <ul id="slide-out" class="sidenav">
            <li>
                <div class="user-view">
                    
                    <div class="background" >
                        <img src="../images/default_user_bg.jpg">
                    </div>
                    
                    <img id="user_image" class="circle" src="../images/default_user_image.png"></img>
                    <div id="user_name" class="white-text name"></div>
                    <div id="user_email" class="white-text email"></div>
                </div>
            </li>
            
            <li><a class="subheader">Actions</a></li>
            
            <li><a href="home.html"><i class="fas fa-home fa-lg"></i>Home</a></li>
            <li><a href="new_invoice.html"><i class="fas fa-file-invoice fa-lg"></i>New Invoice</a></li>
            <li><a href="history.html"><i class="fas fa-history fa-lg"></i>History</a></li>
            <li><a href="#"><i class="fas fa-chart-bar fa-lg"></i>Analytics</a></li>

            <li><div class="divider"></div></li>
            
            <li><a href="javascript:logOutUser();"><i class="fas fa-sign-out-alt fa-lg"></i>Logout</a></li>
        </ul>
             
        <div style="padding: 10px; position: fixed;">
            <a href="#" data-target="slide-out" class="sidenav-trigger btn-floating btn-large waves-effect waves-light black">
            <i class="material-icons">menu</i>
            </a>
        </div>

        <!-- Dashboard content here! -->
        <div id="invoice_form" class="row">

                
            <div class="col s12">
                <div class="card white">
                    <div class="card-image" style="background: #536976;  /* fallback for old browsers */
                    background: -webkit-linear-gradient(to right, #292E49, #536976);  /* Chrome 10-25, Safari 5.1-6 */
                    background: linear-gradient(to right, #292E49, #536976); /* W3C, IE 10+/ Edge, Firefox 16+, Chrome 26+, Opera 12+, Safari 7+ */
                    height: 100px;">
                    </div>
                    <div class="card-content black-text">
                        <span class="card-title">Welcome back <b id="user_greeting"></b>!</span>
                        <p>Happy seeing you again! Let's get started with generating invoices. Click on the button below to open new invoice generation page (or) you can click on <b>&#8801</b> button on the left to open menu and navigate.</p>
                    </div>
                    <div class="card-action">
                        <a href="new_invoice.html">Create a new Invoice</a>
                    </div>
                </div>
            </div>
                         

            <div class="col s8">
                <div class="card white">
                    <div class="card-image" style="background: #b92b27;  /* fallback for old browsers */
                    background: -webkit-linear-gradient(to right, #1565C0, #b92b27);  /* Chrome 10-25, Safari 5.1-6 */
                    background: linear-gradient(to right, #1565C0, #b92b27); /* W3C, IE 10+/ Edge, Firefox 16+, Chrome 26+, Opera 12+, Safari 7+ */
                    height: 50px;">
                    </div>
                    <div class="card-content black-text">
                        <span class="card-title">History</span>
                        <p>Have a look at your previous generated invoices via history. You can preview, download, export or delete your previous invoices from the history page.</p>
                    </div>
                    <div class="card-action">
                        <a href="history.html">Open History</a>
                    </div>
                </div>
            </div>

            <div class="col s4">
                <div class="card white">
                    <div class="card-image" style="background: #FF0099;  /* fallback for old browsers */
                    background: -webkit-linear-gradient(to right, #493240, #FF0099);  /* Chrome 10-25, Safari 5.1-6 */
                    background: linear-gradient(to right, #493240, #FF0099); /* W3C, IE 10+/ Edge, Firefox 16+, Chrome 26+, Opera 12+, Safari 7+ */
                    height: 50px;">
                    </div>
                    <div class="card-content grey-text">
                        <span class="card-title">Analytics</span>
                        <p>Coming soon!</p>
                    </div>
                    <div class="card-action">
                        <a href="#">Open Analytics</a>
                    </div>
                </div>
            </div>

            <div class="col s12">
                <div class="card white">
                    <div class="card-content black-text">
                        <p>Made with &#x1F497 by <b>Cherubim Palukury</b></p>
                    </div>
                </div>
            </div>

        </div>
    </body>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.4.1/jspdf.debug.js" integrity="sha384-THVO/sM0mFD9h7dfSndI6TS0PgAGavwKvB5hAxRRvc0o9cPLohB0wb/PTA7LdUHs" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            var elems = document.querySelectorAll('.sidenav');
            var instances = M.Sidenav.init(elems, {});
        });

        firebase.auth().onAuthStateChanged(function(user) {
            if (user) {
                if (user.photoURL) {
                    document.getElementById("user_image").src = user.photoURL;
                }
                document.getElementById("user_name").innerText = user.displayName;
                document.getElementById("user_greeting").innerText = user.displayName;
                document.getElementById("user_email").innerText = user.email;
            } else {
                window.location = "../index.html";
            }
        });

        function logOutUser() {
            firebase.auth().signOut().then(function() {
                document.location.href = "https://www.google.com/accounts/Logout?continue=https://appengine.google.com/_ah/logout?continue=https://cherub7.github.io/Invoice-generator/"
            }).catch(function(error) {
                console.log(error);
            });
        }
    </script>
</html>